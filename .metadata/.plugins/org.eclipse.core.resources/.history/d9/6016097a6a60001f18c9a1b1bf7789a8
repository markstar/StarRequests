package couk.markstar.starrequests.requests
{
	import org.osflash.signals.ISignal;
	import org.osflash.signals.Signal;
	
	public class AbstractRequest implements IRequest
	{
		protected var _startedSignal:Signal;
		protected var _progressSignal:Signal;
		protected var _completedSignal:Signal;
		protected var _failedSignal:Signal;
		
		public function AbstractRequest()
		{
			_startedSignal = new Signal();
			_progressSignal = new Signal( Number );
			_failedSignal = new Signal( String );
		}
		
		/**
		 * @inheritDoc
		 */
		public function get startedSignal():ISignal
		{
			return _startedSignal;
		}
		/** 
		 * @inheritDoc
		 */		
		public function get progressSignal():ISignal
		{
			return _progressSignal;
		}
		
		public function get completedSignal():ISignal
		{
			return _completedSignal;
		}
		/** 
		 * @inheritDoc
		 */		
		public function get failedSignal():ISignal
		{
			return _failedSignal;
		}
		/**
		 * @inheritDoc
		 */		
		public function send():void
		{
			_startedSignal.dispatch();
			_progressSignal.dispatch( 0 );
		}
		
		protected function cleanup():void
		{
			_startedSignal.removeAll();
			_progressSignal.removeAll();
			_completedSignal.removeAll();
			_failedSignal.removeAll();
			
			_startedSignal = null;
			_progressSignal = null;
			_completedSignal = null;
			_failedSignal = null;
		}
	}
}